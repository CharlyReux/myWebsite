<div id="readme" class="md" data-path="Readme.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-doodle-en-quarkus-avec-microservices" class="anchor" href="#doodle-en-quarkus-avec-microservices" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Doodle en Quarkus avec microservices</h1>
<p dir="auto">Ce repository est un fork du projet doodle fait avec quarkus.io, qui a pour but de changer son architecture en microservices.</p>
<p dir="auto">Cette nouvelle architecture se trouve dans le dossier /api, et l'ancienne dans /api_old.</p>
<h2 dir="auto"><a id="user-content-architecture" class="anchor" href="#architecture" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Architecture</h2>
<p dir="auto">La nouvelle architecture se compose de ceci :</p>
<ul dir="auto">
<li>
<p dir="auto">un Front en Angular</p>
</li>
<li>
<p dir="auto">une API Gateway en NGinx qui est liée à :</p>
</li>
<li>
<p dir="auto">un service d'authentification avec Keycloak</p>
</li>
<li>
<p dir="auto">un microservice Dashboard</p>
</li>
<li>
<p dir="auto">un microservice Poll</p>
</li>
</ul>
<p dir="auto">Poll est le microservice qui permet la création des polls, et a accès à :</p>
<ul dir="auto">
<li>un microservice Chat</li>
<li>un microservice EtherPad</li>
<li>un microservice Comment</li>
</ul>
<p dir="auto">Le service d'authentification permet d'empêcher les utilisateurs inconnus d'accéder au service Dashboard, qui permet de retrouver les historiques des polls créés par les utilisateurs ayant un compte.
Quand il y a une demande de création de poll, le Front envoie sa demande à l'API Gateway, qui va elle envoyer une requête à Poll. Poll crée un poll dans sa base de données, et appelle Chat, EtherPad et Comment pour les lier au poll généré.
Quand une personne se connecte ou crée un compte, l'API Gateway redirige les requêtes vers Keycloak, pour que celui-ci envoie un token quand il s'agit d'une connexion, ou ajoute l'utilisateur dans sa BDD quand il s'agit d'une création.</p>
<h1 dir="auto"><a id="user-content-lancement-du-projet" class="anchor" href="#lancement-du-projet" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Lancement du projet</h1>
<p dir="auto">Ce projet a été créé avec :</p>
<ul dir="auto">
<li>java openjdk 11.0.15</li>
<li>maven</li>
<li>docker 20.10.12</li>
<li>docker-compose version 1.29.2</li>
</ul>
<p dir="auto">Pour pouvoir lancer le projet, vous devez allez dans le répertoire doodlestuden/api et lancer la commande suivante :</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="sudo bash PackageAndStart.sh"><pre>sudo bash PackageAndStart.sh</pre></div>
<p dir="auto">Ensuite, allez dans le répertoire doodle/front et lance les commandes suivantes :</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="npm install
npm start"><pre>npm install
npm start</pre></div>
<p dir="auto">Enfin pour accéder au doodle, dans votre navigateur, entrez l'url suivante localhost:4200</p>
</article></div>